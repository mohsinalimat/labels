{"version":3,"file":"labels.min.js","sources":["../../../../apps/labels/labels/public/js/labels.js"],"sourcesContent":["frappe.ui.form.on(\"Production Plan\", {\n    refresh: function (frm) {\n\n        // Agrega un icon-button a la barra de la pagina\n        cur_frm.page.add_action_icon(__(\"fa fa-file-pdf-o\"), function () {\n\n            // Instanciando un dialogo con sus propiedades\n            let dialog = new frappe.ui.Dialog({\n                title: __('Generar Stickers'),\n                fields: [\n                    {\n                        fieldtype: 'Select',\n                        fieldname: 'sticker_type',\n                        label: __('Estilo de sticker'),\n                        reqd: true,\n                        options: [\n                            \"Sticker sin fechas\",\n                            \"Sticker con fecha de cosecha\",\n                            \"Sticker con fecha de vencimiento\",\n                            \"Sticker con todos los datos\"\n                        ],\n                        description: __('Seleccione el estilo de sticker que desee generar')\n                    },\n                    {\n                        fieldtype: 'Button',\n                        fieldname: 'btn_generar',\n                        label: __('Generar Stickers'),\n                        options: '',\n                        description: __(''),\n                    }\n                ]\n            });\n\n            // Muestra el dialogo\n            dialog.show();\n\n            // Agrega un event lister al boton del dialogo\n            dialog.fields_dict.btn_generar.$wrapper.on('click', function (e) {\n                var estilo_sticker = '0';\n\n                if (dialog.fields_dict.sticker_type.value == 'Sticker sin fechas') {\n                    estilo_sticker = '0';\n                }\n                if (dialog.fields_dict.sticker_type.value == 'Sticker con fecha de cosecha') {\n                    estilo_sticker = '1';\n                }\n                if (dialog.fields_dict.sticker_type.value == 'Sticker con fecha de vencimiento') {\n                    estilo_sticker = '2';\n                }\n                if (dialog.fields_dict.sticker_type.value == 'Sticker con todos los datos') {\n                    estilo_sticker = '3';\n                }\n\n                // Frappe call that simply opens a google page in a new tab or window  (for debugging API methods.)\n                /*\n                frappe.call({\n                    method: \"labels.api_labels2.test_method\",\n                    args: {\n                        sticker_type: estilo_sticker\n                    },\n                    callback: function (r) {\n                        // El valor retornado, es la url de la ubicacion del archivo\n                        window.open(r.message);\n                    }\n                });\n                */\n                frappe.call({\n                    method: \"labels.api_labels.process_labels\",\n                    args: {\n                        dict_data: cur_frm.doc.po_items,\n                        sticker_type: estilo_sticker,\n                        production_date: cur_frm.doc.label_production_date,\n                        expiration_date: cur_frm.doc.label_expiration_date\n                    },\n                    callback: function (r) {\n                        // El valor retornado, es la url de la ubicacion del archivo\n                        window.open(r.message);\n                    }\n                });\n            });\n        });\n    }\n});\n\nconsole.log(\"'Labels' has been loaded.\");\n"],"names":["frappe","ui","form","on","refresh","frm","cur_frm","page","add_action_icon","__","let","dialog","Dialog","title","fields","fieldtype","fieldname","label","reqd","options","description","show","fields_dict","btn_generar","$wrapper","e","estilo_sticker","sticker_type","value","call","method","args","dict_data","doc","po_items","production_date","label_production_date","expiration_date","label_expiration_date","callback","r","window","open","message","console","log"],"mappings":"yBAAAA,OAAOC,GAAGC,KAAKC,GAAG,kBAAmB,CACjCC,QAAS,SAAUC,GAGfC,QAAQC,KAAKC,gBAAgBC,GAAG,oBAAqB,WAGjDC,IAAIC,EAAS,IAAIX,OAAOC,GAAGW,OAAO,CAC9BC,MAAOJ,GAAG,oBACVK,OAAQ,CACJ,CACIC,UAAW,SACXC,UAAW,eACXC,MAAOR,GAAG,qBACVS,MAAM,EACNC,QAAS,CACL,qBACA,+BACA,mCACA,+BAEJC,YAAaX,GAAG,sDAEpB,CACIM,UAAW,SACXC,UAAW,cACXC,MAAOR,GAAG,oBACVU,QAAS,GACTC,YAAaX,GAAG,QAM5BE,EAAOU,OAGPV,EAAOW,YAAYC,YAAYC,SAASrB,GAAG,QAAS,SAAUsB,GAC1D,IAAIC,EAAiB,IAEwB,sBAAzCf,EAAOW,YAAYK,aAAaC,QAChCF,EAAiB,KAEwB,gCAAzCf,EAAOW,YAAYK,aAAaC,QAChCF,EAAiB,KAEwB,oCAAzCf,EAAOW,YAAYK,aAAaC,QAChCF,EAAiB,KAEwB,+BAAzCf,EAAOW,YAAYK,aAAaC,QAChCF,EAAiB,KAgBrB1B,OAAO6B,KAAK,CACRC,OAAQ,mCACRC,KAAM,CACFC,UAAW1B,QAAQ2B,IAAIC,SACvBP,aAAcD,EACdS,gBAAiB7B,QAAQ2B,IAAIG,sBAC7BC,gBAAiB/B,QAAQ2B,IAAIK,uBAEjCC,SAAU,SAAUC,GAEhBC,OAAOC,KAAKF,EAAEG,mBAQtCC,QAAQC,IAAI"}